{% include 'home/base.html' %}
{% load mathfilters %}

<div class="container">
	<div class="row m-4">
		<div class="col-12" align="center">
			<h1>Bills of {{month}} {{today.year}}</h1>
		</div>
	</div>
</div>
<div class="container">
<div class="row my-1">
{% for bill in bills %}
    <div class="col-lg-12 col-xs-12 my-2">
	    <div class="card" width="100%">
		<div class="progress">
			<div class="progress-bar" style="width: 25%" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25</div>
		</div>
		<div class="card-body">
		<h5 class="card-title">{{bill.name}}</h5>
		<h6 class="card-subtitle mb-2 text-muted">{{bill.amount}} /-</h6>
		<p class="card-text">
		<ul class="px-3">
			<li>Due: <i>{{bill.due_date}}</i></li>
		<li>Status:
			Total {{bill.paid_amount}}/- Paid by <i>{{bill.payers}}</i></li>
		{% if bill.status %}
		<li><i>cleared</i> on {{bill.clearance_date}}</li>
		{%else%}
			<li><i>{{bill.amount|sub:bill.paid_amount}}/- Due</i></li>
		{% endif%}
		</ul>
		</p>
	
		<!-- <a href="#" class="card-link">Clear</a-->
		{% if bill.status %}
		<a href="#" class="btn btn-success">Cleared!</a>
		{% else %}
		       <a href="{% url 'bill_update_page' bill.id %}" class="btn btn-primary">Pay</a>
		{% endif %}
		<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModalCenter">
  See Modals
</button>
	  </div>
	</div>
    </div>


<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
	    {% for id, data in tx_data.items %}
		{% if id == bill.id %}
			{% for d in data%}
				<li> {{ d.paid_amount }} /- was paid by {{d.paid_by}} on {{d.date}}</li>
			{% endfor%}
		{% endif%}
	    {% endfor%}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
{% endfor %}
  </div>
</div>



